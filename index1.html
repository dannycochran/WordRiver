<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="lib/d3.v2.min.js"></script>
<link rel="stylesheet" href="styles/style.css" type="text/css" /> 
<div>
	<h1>A River of Twitter Words</h1>
</div>  
<style>
@import url(http://bost.ocks.org/mike/style.css?20120427);
.x.axis line {
  shape-rendering: auto;
  stroke-width:0.5px;
}

.line {
  fill: none;
  stroke: #000;
  stroke-width: 1.5px;
}
</style>
</head>
<body>
	<script type="text/javascript">
  	var fill = d3.scale.category20();
  	var margin = {top: 6,right: 0,bottom: 20,left: 40},
  		width = 960 - margin.right,
  		height = 320 - margin.top - margin.bottom;

  	var svg = d3.select("body")
  	  .append("svg")
  	  .attr("width", width + margin.left + margin.right)
  	  .attr("height", height + margin.top + margin.bottom)
  	  .style("margin-left", -margin.left + "px")
  	  .append("g")
  	  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  	svg.append("defs").append("clipPath")
      .attr("id", "clip")
    .append("rect")
      .attr("width", width)
      .attr("height", height);
  	var words = svg.selectAll("text");
  	var a = 0;
  	var b = 0.0 ;
  	function graph(tick) {
		d3.json("twitterWords.json", function (json) {
			selection = words.data(json);
			selection.enter()
			.append("svg:text")
			.attr("y", function (d, i) {
				return (i + 1) * 30
			})
			.attr("x", function (d, i) {
				return i;
			})
			.style("font-family", "Impact") // function will go here to change font type by positivity
			.style("fill", function (d, i) { // function will go here to change font color by objectivity
				return fill(i);
			})
			.style("font-size", function (d) { // function will go here to change font size by frequency
				var btmp = parseInt(b);
				return d[a][btmp].frequency * 5 + "px";
			})
			.text(function (d) {
				var btmp = parseInt(b);
				return d[a][btmp].word;
			});
			tick()
		})
	}
	graph(function tick() {
		b = b+ 1/300;	
		if (b>=4.0) {b = 0.0; a++;}
		if (a>=168.0) {a=0.0; b=0.0;}
		selection
			.transition()
			.ease("linear")
			.duration(400000)
			.attr("x", function(d, i) {
				return i + 700;
			})
			.style("font-size", function (d) { // function will go here to change font size by frequency
				var btmp = parseInt(b);
				return d[a][btmp].frequency * 5 + "px";
			})
			.text (function (d) {
				tick();
 				var btmp = parseInt(b);
				return d[a][btmp].word;
			});
	});

	</script>
</body>
</html>